<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Geokodowanie</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="style.css" />
  <script>
    async function runGeocoding() {
      const runBtn = document.getElementById("run-btn");
      const input = document.getElementById("sheet-link");

      const url = "https://script.google.com/macros/s/AKfycbzoSPntHBFxCeQUJy4MRTcfAsAiQq2faZ9bn-Fq7Y0MqBtVMu9PbSyD6QCwEqF_wt9G/exec";

      runBtn.disabled = true;
      runBtn.textContent = "‚è≥ Trwa geokodowanie...";

      try {
        const response = await fetch(url, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ link: input.value })
        });

        const text = await response.text();
        runBtn.textContent = text.includes("‚úÖ") ? "‚úÖ Gotowe!" : text;
      } catch (e) {
        runBtn.textContent = "‚ùå B≈ÇƒÖd sieci";
      }
    }
  </script>
</head>
<body>
  <div class="container">
    <input type="text" id="sheet-link" placeholder="Wklej link do arkusza Google..." />
    <button id="run-btn" onclick="runGeocoding()">‚ñ∂Ô∏è Uruchom geokodowanie</button>
    <a href="map.html" id="map-link">üó∫Ô∏è Zobacz mapƒô</a>
  </div>
</body>
</html>
